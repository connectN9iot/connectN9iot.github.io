<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Read,Write,Update,Delete Data v9.x.x</title>
	<style> 
		label{dislay: inline-block; width:80px}
		input,select{with: 120px;}
	</style>
</head>

<body>
	<label>Name</label> <input id="Namebox" type="text">
	<label>RollNo</label> <input id="Rollbox" type="text">
	<label>Section</label> <input id="Secbox" type="text">
	<label>Name</label>
	<select id="Genbox">
		<option value="Male">Male</option>
		<option value="Female">Female</option>
	</select>
	<hr>
	<button id="Insbtn">INSERT</button>
	<button id="Selbtn">SELECT</button>
	<button id="Updbtn">UPDATE</button>
	<button id="Delbtn">DELETE</button>

	<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.13.0/firebase-app.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyD4pt30fnjFCwN_UHLLme-CJCn8qwPjChA",
    authDomain: "bysoctrang.firebaseapp.com",
    databaseURL: "https://bysoctrang-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "bysoctrang",
    storageBucket: "bysoctrang.appspot.com",
    messagingSenderId: "452399304042",
    appId: "1:452399304042:web:80bc78d8deecc279ad6913"
  };
  // Initialize Firebase
  	const app = initializeApp(firebaseConfig);
  	import{getDatabase , ref , get, set, child, update remove}
  	from"https://www.gstatic.com/firebasejs/9.13.0/firebase-database.js";

  	const db =getDatabase();
  	
  	// references
  	var namebox = document.getElementById("Namebox");
  	var rollbox = document.getElementById("Rollbox");
  	var secbox = document.getElementById("Secbox");
  	var genbox = document.getElementById("Genbox");

  	var insBtn = document.getElementById("Insbtn");
  	var selBtn = document.getElementById("Selbtn");
  	var updBtn = document.getElementById("Updbtn");
  	var delBtn = document.getElementById("Delbtn");

  	function InsertData() {
  		set(ref(db,"TheStudents/"+ rollbox.value),{
  			Nameofstd: namebox.value,
  			RollNo: rollbox.value,
  			Section: secbox.value,
  			Gender: genbox.value
  		})
  		.then(()=>{
  			alert("data stored successfully");
  		})
  		.catch((error)=>{
  			alert("unsuccessful,error"+ error );
  		});
  	}
  	function selectData(){
  		const dbref = ref(db);
  		get(child(dbref,"Thestudents/"+rollbox.value)).then((snap)=>{
  			if(snapshot.exists()){
  				namebox.value = snapshot.val().Nameofstd;
  				secbox.value = snapshot.val().Section;
  				genbox.value = snapshot.val().Gender;
  			}
  			else{
  				alert("No data found");
  			}
  		})
  		.catch((error)=>{
  			alert("unsucccessful, error"+ error);
  		});
  	}
  	function UpdateData(){
  		update(ref(db,"TheStudents/"+ rollbox.value),{
  			Nameofstd: namebox.value,
  			
  			Section: secbox.value,
  			Gender: genbox.value
  		})
  		.then(()=>{
  			alert("data update successfully");
  		})
  		.catch((error)=>{
  			alert("unsuccessful,error"+ error );
  		});
  	}
  	function DeleteData(){
  		remove(ref(db,"TheStudents/"+ rollbox.value))
  		.then(()=>{
  			alert("data removed successfully");
  		})
  		.catch((error)=>{
  			alert("unsuccessful,error"+ error );
  		});
  	}

  		insBtn.addEventListener('click', InsertData);
  		selBtn.addEventListener('click', SelectData);
  		updBtn.addEventListener('click', UpdateData);
  		delBtn.addEventListener('click', DeleteData);
  
</script>
</body>
</html>